<!DOCTYPE html><html lang="zh" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>CSAPP-datalabæ€»ç»“ | ZCCCCC01's Blog</title><meta name="author" content="ZCCCCC01"><meta name="copyright" content="ZCCCCC01"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="åš datalab çš„å¿ƒè·¯å†ç¨‹æ€»ç»“1. bitXor å‡½æ•°åªç”¨ ~ å’Œ &amp; å®ç°x ^ yå®ç°å¼‚æˆ–ï¼Œæˆ‘çš„æ€è·¯æ˜¯:    x y x^y    101 100 001   1 1 0   0 0 0   1 0 1    &amp;åä¸º 1ï¼Œé‚£ä¹ˆä¸¤ä¸ªæ•°è¯¥ä½éƒ½æ˜¯ 1 æˆ‘éœ€è¦æ‰¾&amp;åä¸º 0ï¼Œå¹¶ä¸”è¯¥ä½åªæœ‰ä¸€ä¸ª 0(todo) &amp;åä¸º 0ï¼Œå¹¶ä¸”ä¸¤ä¸ªæ•°è¯¥ä½éƒ½æ˜¯ 0   æ‰€ä»¥ a &amp;amp">
<meta property="og:type" content="article">
<meta property="og:title" content="CSAPP-datalabæ€»ç»“">
<meta property="og:url" content="https://zccccc01.github.io/2025/04/12/CSAPP-datalab%E6%80%BB%E7%BB%93/index.html">
<meta property="og:site_name" content="ZCCCCC01&#39;s Blog">
<meta property="og:description" content="åš datalab çš„å¿ƒè·¯å†ç¨‹æ€»ç»“1. bitXor å‡½æ•°åªç”¨ ~ å’Œ &amp; å®ç°x ^ yå®ç°å¼‚æˆ–ï¼Œæˆ‘çš„æ€è·¯æ˜¯:    x y x^y    101 100 001   1 1 0   0 0 0   1 0 1    &amp;åä¸º 1ï¼Œé‚£ä¹ˆä¸¤ä¸ªæ•°è¯¥ä½éƒ½æ˜¯ 1 æˆ‘éœ€è¦æ‰¾&amp;åä¸º 0ï¼Œå¹¶ä¸”è¯¥ä½åªæœ‰ä¸€ä¸ª 0(todo) &amp;åä¸º 0ï¼Œå¹¶ä¸”ä¸¤ä¸ªæ•°è¯¥ä½éƒ½æ˜¯ 0   æ‰€ä»¥ a &amp;amp">
<meta property="og:locale">
<meta property="og:image" content="https://zccccc01.github.io/img/avatar.png">
<meta property="article:published_time" content="2025-04-12T13:40:47.000Z">
<meta property="article:modified_time" content="2025-04-12T13:49:35.606Z">
<meta property="article:author" content="ZCCCCC01">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zccccc01.github.io/img/avatar.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://zccccc01.github.io/2025/04/12/CSAPP-datalab%E6%80%BB%E7%BB%93/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'CSAPP-datalabæ€»ç»“',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-color: #49B202;"></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">ZCCCCC01's Blog</span></a><a class="nav-page-title" href="/"><span class="site-name">CSAPP-datalabæ€»ç»“</span></a></span><div id="menus"></div></nav><div id="post-info"><h1 class="post-title">CSAPP-datalabæ€»ç»“</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-04-12T13:40:47.000Z" title="Created 2025-04-12 21:40:47">2025-04-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-04-12T13:49:35.606Z" title="Updated 2025-04-12 21:49:35">2025-04-12</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="åš-datalab-çš„å¿ƒè·¯å†ç¨‹æ€»ç»“"><a href="#åš-datalab-çš„å¿ƒè·¯å†ç¨‹æ€»ç»“" class="headerlink" title="åš datalab çš„å¿ƒè·¯å†ç¨‹æ€»ç»“"></a>åš datalab çš„å¿ƒè·¯å†ç¨‹æ€»ç»“</h1><h2 id="1-bitXor-å‡½æ•°"><a href="#1-bitXor-å‡½æ•°" class="headerlink" title="1. bitXor å‡½æ•°"></a>1. bitXor å‡½æ•°</h2><p>åªç”¨ ~ å’Œ &amp; å®ç°<code>x ^ y</code>å®ç°å¼‚æˆ–ï¼Œæˆ‘çš„æ€è·¯æ˜¯:</p>
<table>
<thead>
<tr>
<th>x</th>
<th>y</th>
<th>x^y</th>
</tr>
</thead>
<tbody><tr>
<td>101</td>
<td>100</td>
<td>001</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
</tr>
</tbody></table>
<ol>
<li>&amp;åä¸º 1ï¼Œé‚£ä¹ˆä¸¤ä¸ªæ•°è¯¥ä½éƒ½æ˜¯ 1</li>
<li>æˆ‘éœ€è¦æ‰¾&amp;åä¸º 0ï¼Œå¹¶ä¸”è¯¥ä½åªæœ‰ä¸€ä¸ª 0(todo)</li>
<li>&amp;åä¸º 0ï¼Œå¹¶ä¸”ä¸¤ä¸ªæ•°è¯¥ä½éƒ½æ˜¯ 0</li>
</ol>
<ul>
<li>æ‰€ä»¥ <code>a &amp; b = c</code> ä½ä¸º 1 çš„å°±æ‰¾åˆ°ä¸Šé¢çš„ 1.</li>
<li><code>~a &amp; ~b = d</code> ä½ä¸º 1 çš„å°±æ‰¾åˆ°ä¸Šé¢çš„ 3.</li>
<li><code>~c &amp; ~d</code>æ¨å‡ºä¸Šé¢çš„ 2.</li>
</ul>
<h2 id="2-tmin-å‡½æ•°"><a href="#2-tmin-å‡½æ•°" class="headerlink" title="2. tmin å‡½æ•°"></a>2. tmin å‡½æ•°</h2><p>è¿”å›è¡¥ç è¡¨ç¤ºçš„æœ€å°æ•´æ•°</p>
<ul>
<li>ç›´æ¥æœ€é«˜ä½ä¸º 1, å…¶ä½™å…¨ 0 å³å¯</li>
<li>ä¹Ÿå°±æ˜¯<code>-2^31 + ...</code>æœ€å°, æ‰€ä»¥â€¦å…¨å– 0</li>
</ul>
<h2 id="3-isTmax-å‡½æ•°"><a href="#3-isTmax-å‡½æ•°" class="headerlink" title="3. isTmax å‡½æ•°"></a>3. isTmax å‡½æ•°</h2><p>è¿”å›æ˜¯å¦ä¸ºè¡¥ç è¡¨ç¤ºçš„æœ€å¤§æ•´æ•°</p>
<ul>
<li>x å¦‚æœæ˜¯ Tmax,æœ‰<code>~(x+1) ^ x</code>è¿™ä¸ªæ˜¯ 0,å†å–ä¸ª!</li>
<li>but <code>x = -1</code>,è¿™ä¸ªä¹Ÿæ»¡è¶³,éœ€è¦ç‰¹åˆ¤,åŠ ä¸Š<code>&amp; !!(x+1)</code></li>
</ul>
<h2 id="4-allOddBits-å‡½æ•°"><a href="#4-allOddBits-å‡½æ•°" class="headerlink" title="4. allOddBits å‡½æ•°"></a>4. allOddBits å‡½æ•°</h2><p>è‹¥å¥‡æ•°ä½ä¸Šå…¨ä¸º 1 è¿”å› 1,å¦åˆ™ 0</p>
<p>åŸå§‹æ€è·¯æ¯ 8 ä½æ£€æŸ¥ä¸€ä¸‹(op æ¬¡æ•°è¶…äº†):</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">allOddBits</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> mask = <span class="number">0xaa</span>;</span><br><span class="line">  <span class="keyword">return</span> !((x &amp; mask) ^ mask) &amp; !((x &gt;&gt; <span class="number">8</span> &amp; mask) ^ mask) &amp;</span><br><span class="line">         !((x &gt;&gt; <span class="number">16</span> &amp; mask) ^ mask) &amp; !((x &gt;&gt; <span class="number">24</span> &amp; mask) ^ mask);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ”¹è¿›æ€è·¯æ„é€ å‡º<code>0xaaaa_aaaa</code>è¿™ä¸ªæ©ç (9 æ¬¡):</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">allOddBits</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> mask = <span class="number">0xaa</span>;</span><br><span class="line">  mask = (mask &lt;&lt; <span class="number">24</span>) | ((mask &lt;&lt; <span class="number">16</span>) | ((mask &lt;&lt; <span class="number">8</span>) | mask));</span><br><span class="line">  <span class="keyword">return</span> !((x &amp; mask) ^ mask);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿›ä¸€æ­¥å°æ”¹è¿›(7 æ¬¡)</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">allOddBits</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> mask = <span class="number">0xaa</span>;</span><br><span class="line">  mask = ((mask &lt;&lt; <span class="number">8</span>) | mask); <span class="comment">// æ„é€ å‡º0xaaaa</span></span><br><span class="line">  mask = (mask &lt;&lt; <span class="number">16</span>) | mask;</span><br><span class="line">  <span class="keyword">return</span> !((x &amp; mask) ^ mask);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ç¬”è®°</strong>: <code>a == b</code> ç­‰ä»·äº <code>!(a ^ b)</code></p>
<h2 id="5-negate-å‡½æ•°"><a href="#5-negate-å‡½æ•°" class="headerlink" title="5. negate å‡½æ•°"></a>5. negate å‡½æ•°</h2><p>è¿”å›-x(32bit è¡¥ç )</p>
<ul>
<li><code>x + ~x = -1</code></li>
<li><code>x - x = 0</code></li>
<li>å¾—<code>-x = ~x + 1</code></li>
</ul>
<h2 id="6-isAsciiDigit-å‡½æ•°"><a href="#6-isAsciiDigit-å‡½æ•°" class="headerlink" title="6. isAsciiDigit å‡½æ•°"></a>6. isAsciiDigit å‡½æ•°</h2><p>è‹¥ x ä¸º ASCII çš„æ•°å­—è¿”å› 1,å¦åˆ™ 0</p>
<p>æ€è·¯ 1:</p>
<ul>
<li>åˆ¤å®š<code>x - 0x30 &gt;=0</code></li>
<li>åˆ¤å®š<code>0x39 - x &gt;=0</code></li>
<li>å‡ x ç”¨åˆ°å‰ä¸€é¢˜çš„<code>~x+1</code></li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">isAsciiDigit</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> lower_bound = x + (~<span class="number">0x30</span> + <span class="number">1</span>);</span><br><span class="line">  <span class="type">int</span> upper_bound = <span class="number">0x39</span> + (~x + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  <span class="type">int</span> lower_ok = !(lower_bound &gt;&gt; <span class="number">31</span>);</span><br><span class="line">  <span class="type">int</span> upper_ok = !(upper_bound &gt;&gt; <span class="number">31</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> lower_ok &amp; upper_ok;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ€è·¯ 2:</p>
<p>æ£€æŸ¥ x å¦‚ä¸‹å›¾</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">|24bit |4bit|4bit |</span><br><span class="line">|00..00|0011|0 ~ 9|</span><br></pre></td></tr></table></figure>

<p>ä»£ç å®ç°</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">isAsciiDigit</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> all_zero = !(x &gt;&gt; <span class="number">8</span>);</span><br><span class="line">  <span class="type">int</span> upper_nibble = !(((x &gt;&gt; <span class="number">4</span>) &amp; <span class="number">0xf</span>) ^ <span class="number">0x3</span>);</span><br><span class="line">  <span class="type">int</span> lower_nibble = x &amp; <span class="number">0xf</span>;</span><br><span class="line">  <span class="comment">// 9 - x &gt;= 0</span></span><br><span class="line">  <span class="type">int</span> less_nine = <span class="number">9</span> + (~lower_nibble + <span class="number">1</span>);</span><br><span class="line">  <span class="type">int</span> less_nine_ok = !(less_nine &gt;&gt; <span class="number">31</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> less_nine_ok &amp; all_zero &amp; upper_nibble;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>ç¬”è®°</strong>: æ£€æµ‹ x æ˜¯å¦ä¸ºè´Ÿæ•°ç­‰ä»·äºæ£€æŸ¥ç¬¦å·ä½æ˜¯ 0&#x2F;1</li>
</ul>
<h2 id="7-conditional-å‡½æ•°"><a href="#7-conditional-å‡½æ•°" class="headerlink" title="7. conditional å‡½æ•°"></a>7. conditional å‡½æ•°</h2><p>å®ç°ä»¿ä¸‰ç›®è¿ç®—ç¬¦</p>
<p>ä¸€å¼€å§‹çš„é”™è¯¯æ€è·¯:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">conditional</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> z)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// æ©ç è®¡ç®—æœ‰è¯¯</span></span><br><span class="line">  <span class="type">int</span> y_mask = ~(!x);  <span class="comment">// 0xff..ff</span></span><br><span class="line">  <span class="type">int</span> z_mask = ~x;  <span class="comment">// 0xff..ff</span></span><br><span class="line"></span><br><span class="line">  <span class="type">int</span> left = (y_mask &amp; y);</span><br><span class="line">  <span class="type">int</span> right = (z_mask &amp; z);</span><br><span class="line">  <span class="comment">// è¿™é‡Œ left&amp;1å¾—ä¸åˆ°left</span></span><br><span class="line">  <span class="keyword">return</span> (left &amp; (!!x)) | (right &amp; (!x));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ”¹æ­£å(æ€è·¯è§æ³¨é‡Š):</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">conditional</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> z)</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> x_ok = !!x;</span><br><span class="line">  <span class="comment">// å½“x!=0 y_maskåº”è¯¥=0xff..ff(å®é™…æ˜¯-1çš„è¡¥ç )</span></span><br><span class="line">  <span class="type">int</span> y_mask = ~x_ok + <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// å½“x!=0 z_maskåº”è¯¥=0x00..00</span></span><br><span class="line">  <span class="type">int</span> z_mask = ~y_mask;</span><br><span class="line">  <span class="keyword">return</span> (y &amp; y_mask) | (z &amp; z_mask);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="8-isLessOrEqual-å‡½æ•°"><a href="#8-isLessOrEqual-å‡½æ•°" class="headerlink" title="8. isLessOrEqual å‡½æ•°"></a>8. isLessOrEqual å‡½æ•°</h2><p>x&lt;&#x3D;y å°±è¿”å› 1,å¦åˆ™ 0</p>
<p>æ€è·¯:</p>
<ul>
<li><code>y - x &gt;= 0</code>æ£€æŸ¥è¯¥ä¸ç­‰å¼å³å¯</li>
</ul>
<h2 id="9-logicalNeg-å‡½æ•°"><a href="#9-logicalNeg-å‡½æ•°" class="headerlink" title="9. logicalNeg å‡½æ•°"></a>9. logicalNeg å‡½æ•°</h2><p>å®ç°!è¿ç®—ç¬¦</p>
<p>æ€è·¯:</p>
<ul>
<li>0 çš„ç‰¹å¾&#x3D;&gt;<code>0x00..00</code>å…¨ 0</li>
<li>Â±0 éƒ½æ˜¯æœ¬èº«</li>
<li><code>x | (-x)</code>åˆ¤å®šç¬¦å·ä½æ˜¯å¦ä¸º 1,è½¬æ¢ä¸ºå¼å­ç»“æœæ˜¯-1(é 0 æ—¶)</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">logicalNeg</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123; <span class="keyword">return</span> (((x | (~x + <span class="number">1</span>)) &gt;&gt; <span class="number">31</span>) &amp; <span class="number">1</span>) ^ <span class="number">1</span>; &#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">logicalNeg</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123; <span class="keyword">return</span> ((x | (~x + <span class="number">1</span>)) &gt;&gt; <span class="number">31</span>) + <span class="number">1</span>; &#125; <span class="comment">// è¿›ä¸€æ­¥å°ä¼˜åŒ–</span></span><br></pre></td></tr></table></figure>

<h2 id="10-howManyBits-å‡½æ•°"><a href="#10-howManyBits-å‡½æ•°" class="headerlink" title="10. howManyBits å‡½æ•°"></a>10. howManyBits å‡½æ•°</h2><p>è¿”å›æœ€å°‘ç”¨å¤šå°‘ä½è¡¨ç¤º x</p>
<p>æ€è·¯:</p>
<ul>
<li><p>æ­£æ•°:</p>
<ul>
<li>æœ€é«˜æœ‰æ•ˆä½ 1 çš„ä½ç½®åŠ  1(ç¬¦å·ä½)</li>
</ul>
</li>
<li><p>è´Ÿæ•°</p>
<ul>
<li>æœ€é«˜æœ‰æ•ˆä½ 0 çš„ä½ç½®åŠ  1</li>
</ul>
</li>
</ul>
<p>å†ç¿»è¯‘ä¸€ä¸‹:</p>
<ul>
<li>å…ˆæŠŠä¸€ä¸ª x å…ˆå˜ä¸º ~x(x&lt;0 æ—¶)</li>
<li>å†å°†è¿™ä¸ªæ­£æ•°å†™æˆ 32 ä½çš„äºŒè¿›åˆ¶,éœ€è¦æ‰¾åˆ°æœ€é«˜æœ‰æ•ˆä½ 1 çš„ä½ç½®(ä¹¦çš„è¯¾åä½œä¸š 2.66 ç±»ä¼¼)<ul>
<li><strong>ä½å¡«å……</strong>&#x2F;ä½ä¼ æ’­<ul>
<li>åç»­é—®é¢˜,æ€ä¹ˆç»Ÿè®¡å¤šå°‘ä¸ª 1(0x00..111 è¿™æ ·çš„æ•°)<strong>popcount</strong></li>
</ul>
</li>
<li>äºŒåˆ†æŸ¥æ‰¾</li>
</ul>
</li>
</ul>
<p>æˆ‘çš„å®ç°</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">howManyBits</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ç®—æ•°å³ç§»(å®¹æ˜“å•çº¯æƒ³æˆå–ç¬¦å·ä½)</span></span><br><span class="line">  <span class="type">int</span> sign = x &gt;&gt; <span class="number">31</span>;</span><br><span class="line">  <span class="comment">// x = ~x(x&lt;0) sign = 0xff..ff</span></span><br><span class="line">  <span class="comment">// x = x(x&gt;0) sign = 0x00..00</span></span><br><span class="line">  x = (sign &amp; ~x) | (~sign &amp; x);</span><br><span class="line">  <span class="type">int</span> is_zero = !x;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä½å¡«å……</span></span><br><span class="line">  x |= x &gt;&gt; <span class="number">1</span>;</span><br><span class="line">  x |= x &gt;&gt; <span class="number">2</span>;</span><br><span class="line">  x |= x &gt;&gt; <span class="number">4</span>;</span><br><span class="line">  x |= x &gt;&gt; <span class="number">8</span>;</span><br><span class="line">  x |= x &gt;&gt; <span class="number">16</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// popcount</span></span><br><span class="line">  <span class="type">int</span> mask = <span class="number">0x55</span>;</span><br><span class="line">  mask = mask | (mask &lt;&lt; <span class="number">8</span>);</span><br><span class="line">  mask = mask | (mask &lt;&lt; <span class="number">16</span>);</span><br><span class="line">  x = (x &amp; mask) + ((x &gt;&gt; <span class="number">1</span>) &amp; mask);  <span class="comment">// æ¯2ä½1çš„ä¸ªæ•°</span></span><br><span class="line"></span><br><span class="line">  mask = <span class="number">0x33</span>;</span><br><span class="line">  mask = mask | (mask &lt;&lt; <span class="number">8</span>);</span><br><span class="line">  mask = mask | (mask &lt;&lt; <span class="number">16</span>);</span><br><span class="line">  x = (x &amp; mask) + ((x &gt;&gt; <span class="number">2</span>) &amp; mask);  <span class="comment">// æ¯4ä½1çš„ä¸ªæ•°</span></span><br><span class="line"></span><br><span class="line">  mask = <span class="number">0x0f</span>;</span><br><span class="line">  mask = mask | (mask &lt;&lt; <span class="number">8</span>);</span><br><span class="line">  mask = mask | (mask &lt;&lt; <span class="number">16</span>);</span><br><span class="line">  x = (x &amp; mask) + ((x &gt;&gt; <span class="number">4</span>) &amp; mask);  <span class="comment">// æ¯8ä½1çš„ä¸ªæ•°</span></span><br><span class="line"></span><br><span class="line">  <span class="type">int</span> mask_zero = <span class="number">0x00</span>;</span><br><span class="line">  mask_zero = mask_zero | (mask_zero &lt;&lt; <span class="number">8</span>);</span><br><span class="line">  mask = <span class="number">0xff</span>;</span><br><span class="line">  mask = mask | mask_zero;</span><br><span class="line">  mask = mask | (mask &lt;&lt; <span class="number">16</span>);</span><br><span class="line">  x = (x &amp; mask) + ((x &gt;&gt; <span class="number">8</span>) &amp; mask);  <span class="comment">// æ¯16ä½1çš„ä¸ªæ•°</span></span><br><span class="line"></span><br><span class="line">  mask_zero = mask_zero | (mask_zero &lt;&lt; <span class="number">16</span>);</span><br><span class="line">  mask = <span class="number">0xff</span>;</span><br><span class="line">  mask = mask | (mask &lt;&lt; <span class="number">8</span>);</span><br><span class="line">  mask = mask | mask_zero;</span><br><span class="line"></span><br><span class="line">  x = (x &amp; mask) + ((x &gt;&gt; <span class="number">16</span>) &amp; mask);  <span class="comment">// 32ä½1çš„ä¸ªæ•°</span></span><br><span class="line"></span><br><span class="line">  <span class="type">int</span> res = x + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (res &amp; ~is_zero) | (is_zero &amp; <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>claude æä¾›(äºŒåˆ†)</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">howManyBits</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> sign = x &gt;&gt; <span class="number">31</span>;</span><br><span class="line">    <span class="comment">// å¦‚æœæ˜¯è´Ÿæ•°ï¼ŒæŒ‰ä½å–åï¼›å¦‚æœæ˜¯æ­£æ•°ï¼Œä¿æŒä¸å˜</span></span><br><span class="line">    x = (sign &amp; ~x) | (~sign &amp; x);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥æ˜¯å¦ä¸ºé›¶</span></span><br><span class="line">    <span class="type">int</span> is_zero = !x;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰¾åˆ°æœ€é«˜ä½çš„1ï¼Œé€šè¿‡ä½å¡«å……</span></span><br><span class="line">    <span class="type">int</span> bit16, bit8, bit4, bit2, bit1, bit0;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥é«˜16ä½æ˜¯å¦æœ‰1</span></span><br><span class="line">    bit16 = !!(x &gt;&gt; <span class="number">16</span>) &lt;&lt; <span class="number">4</span>;</span><br><span class="line">    <span class="comment">// 4 -&gt; 2^4</span></span><br><span class="line">    <span class="comment">// å¦‚æœæœ‰1ï¼Œåœ¨é«˜ä½æ‰¾1çš„å…·ä½“ä½ç½®(äºŒåˆ†ä½“ç°)ï¼›å¦åˆ™ä¿æŒåŸæ ·</span></span><br><span class="line">    x = x &gt;&gt; bit16;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥é«˜8ä½æ˜¯å¦æœ‰1</span></span><br><span class="line">    bit8 = !!(x &gt;&gt; <span class="number">8</span>) &lt;&lt; <span class="number">3</span>;</span><br><span class="line">    x = x &gt;&gt; bit8;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥é«˜4ä½æ˜¯å¦æœ‰1</span></span><br><span class="line">    bit4 = !!(x &gt;&gt; <span class="number">4</span>) &lt;&lt; <span class="number">2</span>;</span><br><span class="line">    x = x &gt;&gt; bit4;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥é«˜2ä½æ˜¯å¦æœ‰1</span></span><br><span class="line">    bit2 = !!(x &gt;&gt; <span class="number">2</span>) &lt;&lt; <span class="number">1</span>;</span><br><span class="line">    x = x &gt;&gt; bit2;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥æ¬¡é«˜ä½æ˜¯å¦æœ‰1</span></span><br><span class="line">    bit1 = !!(x &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    x = x &gt;&gt; bit1;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥æœ€ä½ä½æ˜¯å¦æœ‰1</span></span><br><span class="line">    bit0 = x;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¡ç®—ç»“æœï¼šæ‰€æœ‰bitçš„å’ŒåŠ 1ï¼ˆç¬¦å·ä½ï¼‰</span></span><br><span class="line">    <span class="type">int</span> bits = bit16 + bit8 + bit4 + bit2 + bit1 + bit0 + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤„ç†é›¶çš„ç‰¹æ®Šæƒ…å†µï¼šé›¶åªéœ€è¦1ä½</span></span><br><span class="line">    <span class="keyword">return</span> (bits &amp; ~is_zero) | (is_zero &amp; <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ç¬”è®°</strong>:</p>
<ol>
<li><code>  x = (sign &amp; ~x) | (~sign &amp; x)</code>ä¿ç•™æ­£ x,è´Ÿ x å˜~x</li>
<li><code>!!(x &gt;&gt; 16)</code>åˆ¤å®šé«˜ n ä½æœ‰æ²¡æœ‰ 1</li>
<li>ä½å¡«å……</li>
<li>popcount</li>
</ol>
<h2 id="11-floatScale2-å‡½æ•°"><a href="#11-floatScale2-å‡½æ•°" class="headerlink" title="11. floatScale2 å‡½æ•°"></a>11. floatScale2 å‡½æ•°</h2><p>è¿”å› 2*f</p>
<p>æ€è·¯:</p>
<p>æ±‚å‡º s , exp, frac</p>
<ul>
<li>åˆ† 3 ç±»è®¨è®º<ul>
<li>è§„æ ¼åŒ–<ul>
<li><code>exp++</code>å†æ‹¼èµ·æ¥, å¦‚æœ<code>exp==255</code>è¿”å› âˆ</li>
</ul>
</li>
<li>éè§„æ ¼åŒ–<ul>
<li><code>frac&lt;&lt;1</code>å†æ‹¼èµ·æ¥</li>
</ul>
</li>
<li>ç‰¹æ®Šå€¼<ul>
<li>è¿”å› f</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>ä¸ªäººç†è§£:</p>
<ul>
<li>è§„æ ¼åŒ–çš„æƒ…å†µ(1.frac)<ul>
<li>f*2,ä¸»è¦æ˜¯æ•´æ•°éƒ¨åˆ†*2</li>
<li>exp&#x3D;&gt;å½±å“çš„æ˜¯ E(exp-bias) &#x3D;&gt; 2^E(exp++,E++,å¯¹åº”å°±æ˜¯*2 äº†)</li>
</ul>
</li>
<li>éè§„æ ¼åŒ–çš„æƒ…å†µ(0.frac)<ul>
<li>f*2,ä¸»è¦æ˜¯å°æ•°éƒ¨åˆ†*2</li>
<li>frac&#x3D;&gt;å½±å“çš„æ˜¯ M(frac)&#x3D;&gt;(frac&lt;&lt;1,å°±ç›¸å½“äº*2)</li>
</ul>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">unsigned</span> <span class="title">floatScale2</span><span class="params">(<span class="type">unsigned</span> uf)</span> </span>&#123;</span><br><span class="line">  <span class="type">unsigned</span> exp = (uf &gt;&gt; <span class="number">23</span>) &amp; <span class="number">0xff</span>;</span><br><span class="line">  <span class="type">unsigned</span> frac = uf &amp; <span class="number">0x7fffff</span>;</span><br><span class="line">  <span class="type">unsigned</span> s = (uf &gt;&gt; <span class="number">31</span>) &amp; <span class="number">0x1</span>;</span><br><span class="line">  <span class="comment">// âˆå’ŒNaN</span></span><br><span class="line">  <span class="keyword">if</span> (exp == <span class="number">0xff</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> uf;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// éè§„æ ¼åŒ–</span></span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (!exp) &#123;</span><br><span class="line">    <span class="built_in">return</span> (s &lt;&lt; <span class="number">31</span>) | (exp &lt;&lt; <span class="number">23</span>) | (frac &lt;&lt; <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// è§„æ ¼åŒ–</span></span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    exp++;</span><br><span class="line">    <span class="keyword">if</span> (exp == <span class="number">0xff</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> (s &lt;&lt; <span class="number">31</span>) | (exp &lt;&lt; <span class="number">23</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (s &lt;&lt; <span class="number">31</span>) | (exp &lt;&lt; <span class="number">23</span>) | frac;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="12-floatFloat2Int-å‡½æ•°"><a href="#12-floatFloat2Int-å‡½æ•°" class="headerlink" title="12. floatFloat2Int å‡½æ•°"></a>12. floatFloat2Int å‡½æ•°</h2><p>è¿”å›(int)f</p>
<p>æ€è·¯:</p>
<ul>
<li>åˆ† 3 ç±»è®¨è®º<ul>
<li>è§„æ ¼åŒ–<ul>
<li>E&lt;0 &#x3D;&gt; 0(å¤ªå°)</li>
<li>E&gt;&#x3D;31 &#x3D;&gt; 0x80000000u(çˆ† int)</li>
<li>æ­£å¸¸è½¬</li>
</ul>
</li>
<li>éè§„æ ¼åŒ–<ul>
<li>å¤ªå°,è¿”å› 0</li>
</ul>
</li>
<li>ç‰¹æ®Šå€¼<ul>
<li>è¿”å› 0x80000000u</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>æŒ‰å›¾ç¤ºçš„é€†è¿‡ç¨‹:</p>
<p><img src="/../images/int2float.png" alt="intè½¬float"></p>
<p>ä¸€å¼€å§‹çš„å†™æ³•:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">E = exp - bias;</span><br><span class="line"><span class="keyword">if</span> (E &lt; <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (E &gt;= <span class="number">31</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0x80000000u</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// è¿™é‡Œæœ‰ä¸ªæ¼æ´,å½“ E&gt;23, æœªå®šä¹‰è¡Œä¸º</span></span><br><span class="line">  <span class="comment">// ä¸ºä»€ä¹ˆæˆ‘è¿™ä¸ªèƒ½è¿‡, E&gt;23, rightå§‹ç»ˆä¸º0</span></span><br><span class="line">  <span class="type">int</span> point_right = frac &gt;&gt; (<span class="number">23</span> - E) &amp; <span class="number">0xffffff</span>;</span><br><span class="line">  <span class="type">int</span> point_left = <span class="number">1</span> &lt;&lt; E;</span><br><span class="line">  <span class="type">int</span> merge = point_right | point_left;</span><br><span class="line">  <span class="keyword">return</span> s ? -merge : merge;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¿®æ­£å:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">floatFloat2Int</span><span class="params">(<span class="type">unsigned</span> uf)</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> E;</span><br><span class="line">  <span class="type">unsigned</span> exp = (uf &gt;&gt; <span class="number">23</span>) &amp; <span class="number">0xff</span>;</span><br><span class="line">  <span class="type">unsigned</span> frac = uf &amp; <span class="number">0x7fffff</span>;</span><br><span class="line">  <span class="type">unsigned</span> s = (uf &gt;&gt; <span class="number">31</span>) &amp; <span class="number">0x1</span>;</span><br><span class="line">  <span class="type">unsigned</span> bias = <span class="number">127</span>;</span><br><span class="line">  <span class="keyword">if</span> (exp == <span class="number">0xff</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0x80000000u</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!exp) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    E = exp - bias;</span><br><span class="line">    <span class="comment">// å¤ªå°äº†</span></span><br><span class="line">    <span class="keyword">if</span> (E &lt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// çˆ†int</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (E &gt;= <span class="number">31</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0x80000000u</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// æ‹¼èµ·æ¥</span></span><br><span class="line">      <span class="type">int</span> M = (<span class="number">1</span> &lt;&lt; <span class="number">23</span>) | frac;</span><br><span class="line">      <span class="keyword">if</span> (E &lt;= <span class="number">23</span>) &#123;</span><br><span class="line">        <span class="comment">// å»é™¤0</span></span><br><span class="line">        M &gt;&gt;= (<span class="number">23</span> - E);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// è¡¥0</span></span><br><span class="line">        M &lt;&lt;= (E - <span class="number">23</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> s ? -M : M;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="13-floatPower2-å‡½æ•°"><a href="#13-floatPower2-å‡½æ•°" class="headerlink" title="13. floatPower2 å‡½æ•°"></a>13. floatPower2 å‡½æ•°</h2><p>è¿”å› 2.0^x</p>
<p>æ€è·¯:</p>
<ul>
<li>å…ˆåœ¨ç¨¿çº¸å†™ä¸€ä¸‹ 2.0 çš„è¡¨ç¤ºå’Œ 4.0 çš„è¡¨ç¤º,å‘ç° exp éƒ¨åˆ†(ä» 2&#x3D;&gt;4)+1 å³å¯</li>
<li>è§„æ ¼æ•°: exp èŒƒå›´åœ¨ 1-254,æ‰¾å‡ºèŒƒå›´(x &gt;&#x3D; -126 &amp;&amp; x &lt;&#x3D; 127)</li>
<li>éè§„æ ¼æ•°: frac é‡Œæ¯ä¸ªä½éƒ½å¯ä»¥æ˜¯ 1</li>
</ul>
<p>è¯´å®è¯ä¸€å¼€å§‹ä¹Ÿä¸çŸ¥é“(x &gt;&#x3D; -149 &amp;&amp; x &lt; -126)è¿™ä¸ªèŒƒå›´æ€ä¹ˆå¤„ç†</p>
<p>è¿™ä¸ªèŒƒå›´è¿˜æ˜¯ç”¨<code>./btest -f floatPower2 -149</code>æµ‹è¯•è„šæœ¬æµ‹å‡ºæ¥çš„ ğŸ˜‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">unsigned</span> <span class="title">floatPower2</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (x &gt; <span class="number">127</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0x7f800000</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (x &gt;= <span class="number">-126</span> &amp;&amp; x &lt;= <span class="number">127</span>) &#123;</span><br><span class="line">    <span class="type">unsigned</span> exp = <span class="number">127</span> + x;</span><br><span class="line">    <span class="keyword">return</span> exp &lt;&lt; <span class="number">23</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (x &gt;= <span class="number">-149</span> &amp;&amp; x &lt; <span class="number">-126</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> &lt;&lt; (x + <span class="number">149</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0x0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><p>dlc æ£€æŸ¥</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./dlc bits.c <span class="comment"># æ£€æŸ¥æ—¶,ä½ çš„å˜é‡è¦å®šä¹‰åœ¨å‡½æ•°å¼€å¤´,å¦åˆ™ä¼šæŠ¥é”™çš„</span></span><br></pre></td></tr></table></figure>

<h1 id="æˆæœ"><a href="#æˆæœ" class="headerlink" title="æˆæœ"></a>æˆæœ</h1><p><img src="/../images/op-num.png" alt="dlc"></p>
<p><img src="/../images/score.png" alt="btest"></p>
<p><img src="/../images/driver.png" alt="driver"></p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>åš csapp çš„ lab çœŸçš„å¾ˆæœ‰æ„æ€ï¼Œåšå‡ºæ¥è·‘æµ‹è¯•è„šæœ¬çœ‹åˆ°åˆ†æ•°ä¸Šæ¶¨ï¼Œæˆå°±æ„Ÿæ»¡æ»¡ ğŸ¥°ğŸ¥°ã€‚ä¸ªäººè§‰å¾—æœ€éš¾çš„åº”è¯¥æ˜¯ howManyBits è¿™ä¸ªé¢˜ã€‚æ•´ä¸ª lab é›¶é›¶æ•£æ•£èŠ±äº† 3 å¤©æ‰åšå®Œï¼Œèœèœçš„ï¼Œä¸è¿‡ç¡®ç¡®å®å®å­¦åˆ°ä¸œè¥¿äº†ï¼Œæ¥ç€åŠ æ²¹ã€‚</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://zccccc01.github.io">ZCCCCC01</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://zccccc01.github.io/2025/04/12/CSAPP-datalab%E6%80%BB%E7%BB%93/">https://zccccc01.github.io/2025/04/12/CSAPP-datalab%E6%80%BB%E7%BB%93/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-share"><div class="social-share" data-image="/img/avatar.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/2025/03/29/linux%E9%85%8D%E7%BD%AEnotebook/" title="linuxé…ç½®notebook"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">linuxé…ç½®notebook</div></div><div class="info-2"><div class="info-item-1">Linux é…ç½® Jupyter Notebookæƒ³ç”¨ notebook è®°å½•ä¸€ä¸‹å­¦ä¹  csapp çš„è¿‡ç¨‹, é¡ºå¸¦é…äº†ä¸€ä¸‹ C å†…æ ¸ 1. å®‰è£…å’Œé…ç½® å®‰è£… Jupyter Notebookï¼š  ä½¿ç”¨ pipï¼š123python3 -m venv notebooksource notebook/bin/activatepip install notebook   å¯åŠ¨ Jupyter Notebookï¼š 1jupyter notebook è®¾ç½®å¯†ç : 1jupyter server password # è¾“å…¥ä½ çš„å¯†ç   2. å®‰è£… Rust å†…æ ¸ ä½¿ç”¨ evcxr_jupyterï¼š12cargo install evcxr_jupyterevcxr_jupyter --install å¯åŠ¨ Jupyter Notebook åï¼Œé€‰æ‹© Rust å†…æ ¸åˆ›å»ºæ–°çš„ Notebookã€‚  3. å®‰è£… C å†…æ ¸ å®‰è£… jupyter-c-kernelï¼š 1pip install jupyter-c-kernel  å®‰è£… C å†…æ ¸ï¼š 1install_c_kernel --user  4....</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">ZCCCCC01</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">12</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/zccccc01"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">ç¹åå¦‚ä¸‰åƒä¸œæµæ°´,æˆ‘åªå–ä¸€ç“¢çˆ±äº†è§£</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%81%9A-datalab-%E7%9A%84%E5%BF%83%E8%B7%AF%E5%8E%86%E7%A8%8B%E6%80%BB%E7%BB%93"><span class="toc-number">1.</span> <span class="toc-text">åš datalab çš„å¿ƒè·¯å†ç¨‹æ€»ç»“</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-bitXor-%E5%87%BD%E6%95%B0"><span class="toc-number">1.1.</span> <span class="toc-text">1. bitXor å‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-tmin-%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.</span> <span class="toc-text">2. tmin å‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-isTmax-%E5%87%BD%E6%95%B0"><span class="toc-number">1.3.</span> <span class="toc-text">3. isTmax å‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-allOddBits-%E5%87%BD%E6%95%B0"><span class="toc-number">1.4.</span> <span class="toc-text">4. allOddBits å‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-negate-%E5%87%BD%E6%95%B0"><span class="toc-number">1.5.</span> <span class="toc-text">5. negate å‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-isAsciiDigit-%E5%87%BD%E6%95%B0"><span class="toc-number">1.6.</span> <span class="toc-text">6. isAsciiDigit å‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-conditional-%E5%87%BD%E6%95%B0"><span class="toc-number">1.7.</span> <span class="toc-text">7. conditional å‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-isLessOrEqual-%E5%87%BD%E6%95%B0"><span class="toc-number">1.8.</span> <span class="toc-text">8. isLessOrEqual å‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-logicalNeg-%E5%87%BD%E6%95%B0"><span class="toc-number">1.9.</span> <span class="toc-text">9. logicalNeg å‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-howManyBits-%E5%87%BD%E6%95%B0"><span class="toc-number">1.10.</span> <span class="toc-text">10. howManyBits å‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-floatScale2-%E5%87%BD%E6%95%B0"><span class="toc-number">1.11.</span> <span class="toc-text">11. floatScale2 å‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-floatFloat2Int-%E5%87%BD%E6%95%B0"><span class="toc-number">1.12.</span> <span class="toc-text">12. floatFloat2Int å‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-floatPower2-%E5%87%BD%E6%95%B0"><span class="toc-number">1.13.</span> <span class="toc-text">13. floatPower2 å‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">1.14.</span> <span class="toc-text">æ³¨æ„äº‹é¡¹</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%88%90%E6%9E%9C"><span class="toc-number">2.</span> <span class="toc-text">æˆæœ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">3.</span> <span class="toc-text">æ€»ç»“</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/12/CSAPP-datalab%E6%80%BB%E7%BB%93/" title="CSAPP-datalabæ€»ç»“">CSAPP-datalabæ€»ç»“</a><time datetime="2025-04-12T13:40:47.000Z" title="Created 2025-04-12 21:40:47">2025-04-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/03/29/linux%E9%85%8D%E7%BD%AEnotebook/" title="linuxé…ç½®notebook">linuxé…ç½®notebook</a><time datetime="2025-03-29T12:22:00.000Z" title="Created 2025-03-29 20:22:00">2025-03-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/03/28/hexo%E6%B8%B2%E6%9F%93%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F/" title="hexoæ¸²æŸ“æ•°å­¦å…¬å¼">hexoæ¸²æŸ“æ•°å­¦å…¬å¼</a><time datetime="2025-03-28T06:11:59.000Z" title="Created 2025-03-28 14:11:59">2025-03-28</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/03/16/windows-%E4%BD%BF%E7%94%A8-cmake/" title="windows ä½¿ç”¨ cmake">windows ä½¿ç”¨ cmake</a><time datetime="2025-03-16T09:45:56.000Z" title="Created 2025-03-16 17:45:56">2025-03-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/02/28/%E5%B8%B8%E7%94%A8docker%E9%95%9C%E5%83%8F%E5%A4%87%E4%BB%BD/" title="å¸¸ç”¨dockeré•œåƒå¤‡ä»½">å¸¸ç”¨dockeré•œåƒå¤‡ä»½</a><time datetime="2025-02-28T06:13:30.000Z" title="Created 2025-02-28 14:13:30">2025-02-28</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By ZCCCCC01</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>